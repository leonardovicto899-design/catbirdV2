<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo Virtual 75</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    gridTemplateColumns: {
                        '10': 'repeat(10, minmax(0, 1fr))',
                        '15': 'repeat(15, minmax(0, 1fr))',
                    }
                }
            }
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at center, #1a202c 0%, #000000 100%);
        }

        .bingo-ball {
            background: radial-gradient(circle at 30% 30%, #ffffff, #d1d5db);
            box-shadow: 
                inset -5px -5px 15px rgba(0,0,0,0.3),
                5px 5px 15px rgba(0,0,0,0.5);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .bingo-ball.animate-pop {
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes popIn {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            60% { transform: scale(1.1) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        /* Cores das Células */
        .cell-b { background-color: rgba(59, 130, 246, 0.2); border-color: #3b82f6; color: #93c5fd; }
        .cell-i { background-color: rgba(239, 68, 68, 0.2); border-color: #ef4444; color: #fca5a5; }
        .cell-n { background-color: rgba(255, 255, 255, 0.1); border-color: #9ca3af; color: #e5e7eb; }
        .cell-g { background-color: rgba(34, 197, 94, 0.2); border-color: #22c55e; color: #86efac; }
        .cell-o { background-color: rgba(234, 179, 8, 0.2); border-color: #eab308; color: #fde047; }

        .number-cell {
            transition: all 0.2s;
            border-width: 1px;
        }
        
        /* Estado Ativo (Sorteado) */
        .number-cell.active {
            opacity: 1;
            transform: scale(1.1);
            color: black !important;
            font-weight: 800;
            border: 2px solid white;
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
        .number-cell.active.cell-b { background-color: #3b82f6; }
        .number-cell.active.cell-i { background-color: #ef4444; }
        .number-cell.active.cell-n { background-color: #ffffff; }
        .number-cell.active.cell-g { background-color: #22c55e; }
        .number-cell.active.cell-o { background-color: #eab308; }

        /* Cores das Letras na Bola Principal */
        .text-b { color: #3b82f6; }
        .text-i { color: #ef4444; }
        .text-n { color: #6b7280; }
        .text-g { color: #22c55e; }
        .text-o { color: #eab308; }
    </style>
</head>
<body class="text-white min-h-screen flex flex-col items-center p-2 md:p-4">

    <!-- Header Compacto -->
    <header class="w-full max-w-5xl flex justify-between items-center mb-4 border-b border-gray-700 pb-2">
        <div class="flex items-center gap-2">
            <i class="fas fa-gamepad text-yellow-400 text-2xl"></i>
            <div>
                <h1 class="text-xl md:text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-500">BINGO VIRTUAL</h1>
            </div>
        </div>
        <button onclick="confirmReset()" class="text-gray-400 hover:text-red-400 transition text-xs md:text-sm flex items-center gap-2 border border-gray-700 px-3 py-1 rounded hover:bg-gray-800">
            <i class="fas fa-trash-alt"></i> Reiniciar
        </button>
    </header>

    <main class="w-full max-w-5xl grid grid-cols-1 lg:grid-cols-12 gap-6">
        
        <!-- Área de Sorteio (Esquerda / Topo) -->
        <div class="col-span-1 lg:col-span-4 flex flex-col items-center justify-start gap-4">
            
            <!-- Bola Principal -->
            <div id="main-display" class="relative w-48 h-48 md:w-56 md:h-56 flex items-center justify-center">
                <div id="current-ball" class="bingo-ball w-40 h-40 md:w-48 md:h-48 rounded-full flex flex-col items-center justify-center border-4 border-gray-600 relative z-10 hidden">
                    <span id="ball-letter" class="text-3xl font-bold text-gray-600 mb-[-5px]">B</span>
                    <span id="ball-number" class="text-7xl md:text-8xl font-extrabold text-black tracking-tighter">1</span>
                </div>
                
                <!-- Placeholder -->
                <div id="start-placeholder" class="w-40 h-40 md:w-48 md:h-48 rounded-full border-4 border-dashed border-gray-700 flex items-center justify-center animate-pulse">
                    <span class="text-gray-600 font-bold text-lg">PRONTO</span>
                </div>
            </div>

            <!-- Botão de Ação -->
            <button id="draw-btn" onclick="drawNumber()" class="w-full max-w-xs bg-gradient-to-b from-green-500 to-green-700 hover:from-green-400 hover:to-green-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg transform active:scale-95 transition text-lg border-b-4 border-green-900 flex items-center justify-center gap-2">
                <i class="fas fa-random"></i> SORTEAR
            </button>

            <!-- Controles -->
            <div class="flex gap-2 w-full max-w-xs">
                <button onclick="toggleSound()" id="sound-btn" class="flex-1 bg-gray-700 hover:bg-gray-600 py-2 rounded-lg text-xs border-b-2 border-gray-900 transition text-white">
                    <i class="fas fa-volume-up text-green-400"></i> Som: ON
                </button>
                <div class="flex-1 bg-gray-800 rounded-lg flex items-center justify-center text-xs border border-gray-700 px-2">
                    <span class="text-gray-400 mr-2">Total:</span>
                    <span id="count-display" class="font-bold text-yellow-400">0/75</span>
                </div>
            </div>

            <!-- Histórico Compacto -->
            <div class="w-full max-w-xs bg-gray-800 rounded-lg p-2 border border-gray-700">
                <div id="history-list" class="flex gap-1 overflow-x-auto min-h-[30px] items-center">
                    <span class="text-gray-500 text-xs italic w-full text-center">Histórico aparecerá aqui</span>
                </div>
            </div>
        </div>

        <!-- Tabuleiro Quadrado Compacto (Direita / Baixo) -->
        <div class="col-span-1 lg:col-span-8 bg-gray-800 rounded-xl p-3 border border-gray-700 shadow-xl flex flex-col h-fit">
            <div class="flex justify-between items-center mb-2">
                <h2 class="text-base font-bold text-white"><i class="fas fa-th mr-2 text-yellow-500"></i>Tabuleiro</h2>
                <div class="text-[10px] text-gray-400">
                    <span class="text-blue-400">B</span> <span class="text-red-400">I</span> <span class="text-gray-300">N</span> <span class="text-green-400">G</span> <span class="text-yellow-400">O</span>
                </div>
            </div>

            <!-- Grid do Bingo: 10 colunas (Mobile) / 15 colunas (PC) -->
            <div id="master-board" class="grid grid-cols-10 lg:grid-cols-15 gap-1 md:gap-2">
                <!-- Gerado via JS -->
            </div>
        </div>
    </main>

    <!-- Modal Fim de Jogo -->
    <div id="game-over-modal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-800 p-6 rounded-2xl max-w-sm w-full text-center border-2 border-yellow-500 shadow-2xl mx-4">
            <i class="fas fa-trophy text-5xl text-yellow-400 mb-3 animate-bounce"></i>
            <h2 class="text-2xl font-bold text-white mb-1">Fim de Jogo!</h2>
            <p class="text-gray-300 mb-4 text-sm">Todos os números foram sorteados.</p>
            <button onclick="resetGame()" class="bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-lg w-full transition">
                Novo Jogo
            </button>
        </div>
    </div>

    <script>
        const totalNumbers = 75;
        let drawnNumbers = [];
        let isSoundOn = true;
        let synth = window.speechSynthesis;

        document.addEventListener('DOMContentLoaded', () => {
            initBoard();
            // Desbloqueio de áudio para iOS
            document.body.addEventListener('click', () => {
                if (synth.paused) synth.resume();
            }, { once: true });
        });

        function initBoard() {
            const board = document.getElementById('master-board');
            board.innerHTML = '';

            for (let i = 1; i <= totalNumbers; i++) {
                const cell = document.createElement('div');
                cell.id = `cell-${i}`;
                
                // Determinar Estilo pela Letra
                let styleClass = 'cell-o';
                if (i <= 15) styleClass = 'cell-b';
                else if (i <= 30) styleClass = 'cell-i';
                else if (i <= 45) styleClass = 'cell-n';
                else if (i <= 60) styleClass = 'cell-g';

                cell.className = `number-cell ${styleClass} aspect-square flex items-center justify-center rounded text-xs md:text-sm font-semibold cursor-pointer hover:bg-gray-700`;
                cell.innerText = i;
                cell.onclick = () => toggleManual(i);
                board.appendChild(cell);
            }
        }

        function getLetter(number) {
            if (number <= 15) return 'B';
            if (number <= 30) return 'I';
            if (number <= 45) return 'N';
            if (number <= 60) return 'G';
            return 'O';
        }

        function getColorClass(letter) {
            if (letter === 'B') return 'text-b';
            if (letter === 'I') return 'text-i';
            if (letter === 'N') return 'text-n';
            if (letter === 'G') return 'text-g';
            return 'text-o';
        }

        function drawNumber() {
            if (drawnNumbers.length >= totalNumbers) {
                document.getElementById('game-over-modal').classList.remove('hidden');
                return;
            }

            const btn = document.getElementById('draw-btn');
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ...';
            
            setTimeout(() => {
                let number;
                do {
                    number = Math.floor(Math.random() * totalNumbers) + 1;
                } while (drawnNumbers.includes(number));

                drawnNumbers.push(number);
                updateUI(number);
                speakNumber(number);

                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-random"></i> SORTEAR';
            }, 300);
        }

        function updateUI(number) {
            const letter = getLetter(number);
            
            // Bola Principal
            const startPlaceholder = document.getElementById('start-placeholder');
            const currentBall = document.getElementById('current-ball');
            const ballLetter = document.getElementById('ball-letter');
            const ballNumber = document.getElementById('ball-number');

            startPlaceholder.classList.add('hidden');
            currentBall.classList.remove('hidden');
            
            currentBall.classList.remove('animate-pop');
            void currentBall.offsetWidth;
            currentBall.classList.add('animate-pop');

            ballLetter.innerText = letter;
            ballLetter.className = `text-3xl font-bold mb-[-5px] ${getColorClass(letter)}`;
            ballNumber.innerText = number;

            // Tabuleiro
            const cell = document.getElementById(`cell-${number}`);
            if (cell) cell.classList.add('active');

            // Contador
            document.getElementById('count-display').innerText = `${drawnNumbers.length}/${totalNumbers}`;

            // Histórico
            updateHistory();
        }

        function updateHistory() {
            const container = document.getElementById('history-list');
            
            if (drawnNumbers.length <= 1) {
                container.innerHTML = '<span class="text-gray-500 text-xs italic w-full text-center">Histórico aqui</span>';
                return;
            }

            const history = drawnNumbers.slice(0, -1).reverse();
            container.innerHTML = '';
            
            history.forEach(num => {
                const letter = getLetter(num);
                const ball = document.createElement('div');
                ball.className = 'flex-shrink-0 w-8 h-8 rounded-full bg-gray-600 flex flex-col items-center justify-center border border-gray-500 text-[10px] text-white';
                ball.innerHTML = `<span class="${getColorClass(letter)} font-bold leading-none" style="font-size: 8px;">${letter}</span><span class="font-bold leading-none">${num}</span>`;
                container.appendChild(ball);
            });
        }

        function speakNumber(number) {
            if (!isSoundOn) return;
            const letter = getLetter(number);
            let letterPhonetic = letter;
            if (letter === 'B') letterPhonetic = "Bê";
            if (letter === 'I') letterPhonetic = "Í";
            if (letter === 'N') letterPhonetic = "Ene";
            if (letter === 'G') letterPhonetic = "Gê";
            if (letter === 'O') letterPhonetic = "Ó";

            const text = `${letterPhonetic}, ${number}`;
            synth.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'pt-BR';
            utterance.rate = 1.0;
            synth.speak(utterance);
        }

        function toggleSound() {
            isSoundOn = !isSoundOn;
            const btn = document.getElementById('sound-btn');
            if (isSoundOn) {
                btn.innerHTML = '<i class="fas fa-volume-up text-green-400"></i> Som: ON';
                btn.classList.add('text-white');
            } else {
                btn.innerHTML = '<i class="fas fa-volume-mute text-red-400"></i> Som: OFF';
            }
        }

        function confirmReset() {
            if(confirm('Reiniciar o jogo?')) resetGame();
        }

        function resetGame() {
            drawnNumbers = [];
            document.getElementById('start-placeholder').classList.remove('hidden');
            document.getElementById('current-ball').classList.add('hidden');
            document.getElementById('history-list').innerHTML = '<span class="text-gray-500 text-xs italic w-full text-center">Histórico aqui</span>';
            document.getElementById('count-display').innerText = '0/75';
            document.getElementById('game-over-modal').classList.add('hidden');
            document.querySelectorAll('.number-cell').forEach(cell => cell.classList.remove('active'));
            synth.cancel();
        }

        function toggleManual(num) {
            const index = drawnNumbers.indexOf(num);
            const cell = document.getElementById(`cell-${num}`);
            
            if (index > -1) {
                if(confirm(`Remover ${num}?`)) {
                    drawnNumbers.splice(index, 1);
                    cell.classList.remove('active');
                    document.getElementById('count-display').innerText = `${drawnNumbers.length}/${totalNumbers}`;
                }
            } else {
                drawnNumbers.push(num);
                cell.classList.add('active');
                updateUI(num);
            }
        }
    </script>
</body>
</html>